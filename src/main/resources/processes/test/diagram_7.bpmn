<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0fh0tpp" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.41.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.24.0">
  <bpmn:process id="diagram_7" isExecutable="true">
    <bpmn:startEvent id="Event_1qurpjt">
      <bpmn:outgoing>Flow_1fhivgi</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_01yta4d">
      <bpmn:incoming>Flow_19v2b7w</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:scriptTask id="Activity_0ozsmfd" name="Tạo người dùng" scriptFormat="javascript" camunda:resultVariable="userObj">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="userObj2">
            <camunda:script scriptFormat="JavaScript">var user = {
  name: "Test",
  age: "22"
}

user;</camunda:script>
          </camunda:outputParameter>
          <camunda:outputParameter name="userObj3">
            <camunda:script scriptFormat="JavaScript">var user = {
  name: "Test",
  age: "22"
}

user;</camunda:script>
          </camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1fhivgi</bpmn:incoming>
      <bpmn:outgoing>Flow_1ldcacg</bpmn:outgoing>
      <bpmn:script>var user = {
  name: "Huỳnh Đức Phú",
  age: "22"
}

var user2 = {
  name: "TTN",
  age: "22"
}


print("Tên: " + user.name)
print("Tuổi: " + user.age)

execution.setVariable("userObj4", user2)

user;</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_0je4s25" name="Tạo phòng ban" scriptFormat="javascript" camunda:resource="processes/init_department.js">
      <bpmn:incoming>Flow_1ldcacg</bpmn:incoming>
      <bpmn:outgoing>Flow_05w7yf6</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_0pa47bu" name="Gửi Email" camunda:class="fpt.is.bnk.fptis_platform.controller.test.TestDelegate">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="userName">
            <camunda:script scriptFormat="JavaScript">var username = "Huynh Duc Phu";

username;</camunda:script>
          </camunda:inputParameter>
          <camunda:outputParameter name="Output_2u9fvm9">
            <camunda:script scriptFormat="JavaScript">print(test)</camunda:script>
          </camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_05w7yf6</bpmn:incoming>
      <bpmn:outgoing>Flow_1pv7di9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0nkk55j" name="Lấy thông tin user role" camunda:delegateExpression="${fetchUserDelegate}">
      <bpmn:incoming>Flow_1pv7di9</bpmn:incoming>
      <bpmn:outgoing>Flow_0rlpu5v</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1fhivgi" sourceRef="Event_1qurpjt" targetRef="Activity_0ozsmfd" />
    <bpmn:sequenceFlow id="Flow_0rlpu5v" sourceRef="Activity_0nkk55j" targetRef="Activity_1vu2w46" />
    <bpmn:sequenceFlow id="Flow_1ldcacg" sourceRef="Activity_0ozsmfd" targetRef="Activity_0je4s25" />
    <bpmn:sequenceFlow id="Flow_05w7yf6" sourceRef="Activity_0je4s25" targetRef="Activity_0pa47bu" />
    <bpmn:sequenceFlow id="Flow_1pv7di9" sourceRef="Activity_0pa47bu" targetRef="Activity_0nkk55j" />
    <bpmn:sequenceFlow id="Flow_19v2b7w" sourceRef="Activity_1vu2w46" targetRef="Event_01yta4d" />
    <bpmn:serviceTask id="Activity_1vu2w46" name="User Role" camunda:expression="${testService.getDepartment()}" camunda:resultVariable="TestReturnResult">
      <bpmn:incoming>Flow_0rlpu5v</bpmn:incoming>
      <bpmn:outgoing>Flow_19v2b7w</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="diagram_7">
      <bpmndi:BPMNShape id="BPMNShape_188e7pm" bpmnElement="Event_1qurpjt">
        <dc:Bounds x="132" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1o6e2h9_di" bpmnElement="Activity_0ozsmfd">
        <dc:Bounds x="230" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1g3lwgk_di" bpmnElement="Activity_0je4s25">
        <dc:Bounds x="380" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e6iruo_di" bpmnElement="Activity_0pa47bu">
        <dc:Bounds x="510" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0xrsmh5_di" bpmnElement="Activity_0nkk55j">
        <dc:Bounds x="660" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_01yta4d_di" bpmnElement="Event_01yta4d">
        <dc:Bounds x="1012" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1shd9fj_di" bpmnElement="Activity_1vu2w46">
        <dc:Bounds x="810" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1fhivgi_di" bpmnElement="Flow_1fhivgi">
        <di:waypoint x="168" y="120" />
        <di:waypoint x="230" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rlpu5v_di" bpmnElement="Flow_0rlpu5v">
        <di:waypoint x="760" y="120" />
        <di:waypoint x="810" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ldcacg_di" bpmnElement="Flow_1ldcacg">
        <di:waypoint x="330" y="120" />
        <di:waypoint x="380" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05w7yf6_di" bpmnElement="Flow_05w7yf6">
        <di:waypoint x="480" y="120" />
        <di:waypoint x="510" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pv7di9_di" bpmnElement="Flow_1pv7di9">
        <di:waypoint x="610" y="120" />
        <di:waypoint x="660" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19v2b7w_di" bpmnElement="Flow_19v2b7w">
        <di:waypoint x="910" y="120" />
        <di:waypoint x="1012" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
